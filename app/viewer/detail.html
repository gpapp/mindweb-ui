
<div class="panel panel-primary">
    <div class="panel-heading panel-title" ng-click="Ui.turnOff('detailPanel')">
        Hide details <span class="pull-right fa fa-close"></span>
    </div>
    <div class="panel-body">
        <div class="panel panel-default">
            <div class="panel-heading panel-title">
                Text
            </div>
            <div class="panel-body">
                <textarea id="text" class="form-control" rows="5" ng-model="node.attributes.TEXT"></textarea>
            </div>
        </div>

        <div class="panel panel-default" ui-state="nodeDetailPanel" ng-init="nodeDetailPanel=false">
            <div class="panel-heading panel-title">
                Details
                <a class="pull-right" ui-toggle="nodeDetailPanel">
                    <i class="fa fa-chevron-down" ui-show="nodeDetailPanel"></i>
                    <i class="fa fa-chevron-up" ui-hide="nodeDetailPanel"></i>
                </a>
            </div>
            <div class="panel-body" ng-if="Ui.active('nodeDetailPanel')" ng-set="nodeDetailTabActive">
                <tabset>
                    <tab heading="Formatted">
                        <markdown class="tab-content" ng-model="node.detailMarkdown" extensions="github, prettify"></markdown>
                    </tab>
                    <tab heading="Code">
                        <textarea class="tab-pane form-control" rows="5" ng-model="node.detailMarkdown" ></textarea>
                    </tab>
                </tabset>
            </div>
        </div>

        <div class="panel panel-default" ui-state="iconPanel">
            <div class="panel-heading panel-title">
                <i class="fa fa-stack fa-picture-o"></i>Icons
                <a class="pull-right" ui-toggle="iconPanel">
                    <i class="fa fa-chevron-down" ui-show="iconPanel"></i>
                    <i class="fa fa-chevron-up" ui-hide="iconPanel"></i>
                </a>
            </div>
            <div class="panel-body" ng-if="Ui.active('iconPanel')">
                <div class="table">
                    <div class="row">
                        <div class="col-xs-2 text-center" ng-repeat="attr in node.nodes | filter : {name:'icon'}">
                            <img class=" mw-detail-icon" ng-src="/images/icons/{{attr.attributes.BUILTIN}}.png"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel panel-default" ui-state="attributePanel">
            <div class="panel-heading panel-title">
                <i class="fa fa-stack fa-list"></i>Attributes
                <a class="pull-right" ui-toggle="attributePanel">
                    <i class="fa fa-chevron-down" ui-show="attributePanel"></i>
                    <i class="fa fa-chevron-up" ui-hide="attributePanel"></i>
                </a>
            </div>
            <div class="panel-body" ng-if="Ui.active('attributePanel')">
                <table class="table table-bordered">
                    <thead>
                    <tr>
                        <th>Name</th>
                        <th>Value</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="attr in node.nodes | filter : {name:'attribute'}">
                        <td ng-bind="attr.attributes.NAME"></td>
                        <td ng-bind="attr.attributes.VALUE"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
<!--- DEBUG --->
        {{node.attributes.LOCALIZED_STYLE_REF}}
        {{node.attributes.POSITION}}
        <div ng-repeat="cnode in node.keys">
            {{key}}:{{cnode}}
        </div>
        <div class="list-group">
            <div class="list-group-item">{{node.name}}</div>
            <div class="list-group-item">{{node.attributes}}</div>
            <div class="list-group" ng-repeat="cnode in node.nodes|filter :{name:'!node'}:{name:'!attribute'}|filter:{name:'!icon'}">
                <div ng-include="'debug-template'" onload="node=cnode"></div>
            </div>
        </div>

    </div>
</div>
<script type="text/ng-template" id="debug-template">
    <div class="list-group-item">{{node.name}}</div>
    <div class="list-group-item">{{node.value}}</div>
    <div class="list-group-item">{{node.attributes}}</div>
    <div class="indent" ng-repeat="cnode in node.nodes|filter:{name:'!icon'}:{name:'!attribute'}">
        <div ng-include="'debug-template'" onload="node=cnode"></div>
    </div>
</script>
